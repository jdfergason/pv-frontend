(self["webpackChunkpenny_vault"]=self["webpackChunkpenny_vault"]||[]).push([[771],{60324:(o,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>R});var l=t(75305);const a={class:"row q-col-gutter-md q-pl-sm"},n={class:"col-lg-6 col-sm-4"},r={class:"q-mt-sm q-mb-sm"},i={style:{"font-size":"1rem"}},s={class:"col-lg-6 col-sm-8 gt-xs self-end"},m={class:"row q-pl-sm"},u={class:"col"},c={class:"row xs"},p={class:"col"},f={class:"text-center q-ml-md q-mb-sm text-grey-6"};function d(o,e,t,d,b,g){const v=(0,l.up)("q-tab"),y=(0,l.up)("q-tabs"),W=(0,l.up)("q-breadcrumbs-el"),h=(0,l.up)("q-breadcrumbs"),w=(0,l.up)("portfolio-summary"),q=(0,l.up)("q-tab-panel"),P=(0,l.up)("portfolio-holdings"),S=(0,l.up)("portfolio-transactions"),Z=(0,l.up)("portfolio-returns"),k=(0,l.up)("portfolio-settings"),M=(0,l.up)("q-tab-panels"),V=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(V,{class:"q-pa-xs"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",a,[(0,l.Wm)("div",n,[(0,l.Wm)("h4",r,[(0,l.Uk)((0,l.zw)(o.portfolio.name)+" ",1),(0,l.Wm)("span",i,"("+(0,l.zw)(o.format(o.portfolio.performance.periodStart,"MMM"))+" '"+(0,l.zw)(o.format(o.portfolio.performance.periodStart,"yy"))+" to "+(0,l.zw)(o.format(o.portfolio.performance.periodEnd,"MMM"))+" '"+(0,l.zw)(o.format(o.portfolio.performance.periodEnd,"yy"))+")",1)])]),(0,l.Wm)("div",s,[(0,l.Wm)(y,{"inline-label":"","outside-arrows":"","mobile-arrows":"",align:"right","active-color":"blue","indicator-color":"blue",modelValue:o.tabModel,"onUpdate:modelValue":e[1]||(e[1]=e=>o.tabModel=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{name:"summary",label:"Summary"}),(0,l.Wm)(v,{name:"holdings",label:"Holdings"}),(0,l.Wm)(v,{name:"transactions",label:"Transactions"}),(0,l.Wm)(v,{name:"returns",label:"Returns"}),(0,l.Wm)(v,{name:"settings",label:"Settings"})])),_:1},8,["modelValue"])])]),(0,l.Wm)("div",m,[(0,l.Wm)("div",u,[(0,l.Wm)(h,{class:"q-mb-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{icon:"home",to:"/app"}),(0,l.Wm)(W,{label:"My Portfolios",to:"/app/portfolio"}),(0,l.Wm)(W,{label:o.portfolio.name},null,8,["label"])])),_:1})])]),(0,l.Wm)("div",c,[(0,l.Wm)("div",p,[(0,l.Wm)(y,{dense:"","inside-arrows":"",align:"right","active-color":"blue","indicator-color":"blue",modelValue:o.tabModel,"onUpdate:modelValue":e[2]||(e[2]=e=>o.tabModel=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{name:"summary",label:"Summary"}),(0,l.Wm)(v,{name:"holdings",label:"Holdings"}),(0,l.Wm)(v,{name:"transactions",label:"Transactions"}),(0,l.Wm)(v,{name:"returns",label:"Returns"}),(0,l.Wm)(v,{name:"settings",label:"Settings"})])),_:1},8,["modelValue"])])]),(0,l.Wm)(M,{class:"transparent",modelValue:o.tabModel,"onUpdate:modelValue":e[3]||(e[3]=e=>o.tabModel=e),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{name:"summary"},{default:(0,l.w5)((()=>[(0,l.Wm)(w)])),_:1}),(0,l.Wm)(q,{name:"holdings"},{default:(0,l.w5)((()=>[(0,l.Wm)(P)])),_:1}),(0,l.Wm)(q,{name:"transactions"},{default:(0,l.w5)((()=>[(0,l.Wm)(S)])),_:1}),(0,l.Wm)(q,{name:"returns"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z)])),_:1}),(0,l.Wm)(q,{name:"settings"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{"portfolio-id":o.portfolioId},null,8,["portfolio-id"])])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)("span",f,"Computed on: "+(0,l.zw)(o.format(o.portfolio.performance.computedOn,"eeee, MMM eo yyyy HH:mm:ss")),1)])),_:1})}var b=t(87874),g=t(14240),v=t(3259),y=t(84778);const W=(0,l.Wm)("h6",{class:"q-mb-none q-mt-lg"},"Email status frequency",-1),h={class:"q-pt-lg"};function w(o,e,t,a,n,r){const i=(0,l.up)("q-input"),s=(0,l.up)("q-toggle"),m=(0,l.up)("q-btn"),u=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(u,{ref:"params",onSubmit:o.onSubmit,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:o.name,"onUpdate:modelValue":e[1]||(e[1]=e=>o.name=e),label:"Portfolio Name"},null,8,["modelValue"]),(0,l.Wm)("div",null,[W,((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(o.notifications,(o=>((0,l.wg)(),(0,l.j4)(s,{class:"q-mr-lg",key:o.text,modelValue:o.state,"onUpdate:modelValue":e=>o.state=e,label:o.text},null,8,["modelValue","onUpdate:modelValue","label"])))),128))]),(0,l.Wm)("div",h,[(0,l.Wm)(m,{label:"Save",type:"submit",color:"info"}),(0,l.Wm)(m,{label:"Delete",color:"negative",class:"q-ml-sm",onClick:o.deletePortfolio},null,8,["onClick"])])])),_:1},8,["onSubmit"])}t(65363);var q=t(79582),P=t(48825),S=t(37641),Z=t(5474),k=t(24929);const M=(0,l.aZ)({name:"PortfolioSettings",props:{portfolioId:{type:String,required:!0}},setup(o,e){const t=(0,b.oR)(),a=(0,P.Z)(),n=(0,q.tv)(),r=(0,l.Fl)((()=>t.state.portfolio.current)),i=(0,l.iH)(!1),s=(0,l.iH)(`${r.value.name}`),m=(0,l.iH)({daily:{text:"Daily",value:k.FP,state:!1},weekly:{text:"Weekly",value:k.Qs,state:!1},monthly:{text:"Monthly",value:k.EA,state:!1},annually:{text:"Annually",value:k.DL,state:!1}});function u(){m.value.daily.state=(r.value.notifications&k.FP)==k.FP,m.value.weekly.state=(r.value.notifications&k.Qs)==k.Qs,m.value.monthly.state=(r.value.notifications&k.EA)==k.EA,m.value.annually.state=(r.value.notifications&k.DL)==k.DL}function c(){var o=k.mP;return Object.keys(m.value).forEach((e=>{m.value[e].state&&(o|=m.value[e].value)})),o}async function p(o){o.preventDefault();var e=c();t.commit("portfolio/setNotifications",e),t.commit("portfolio/setPortfolioName",s.value);var l={name:s.value,notifications:e};d(l)}async function f(){S.bE.getTokenSilently().then((e=>{a.dialog({title:"Confirm",message:"Please confirm that you want to delete this portfolio.",cancel:!0,persistent:!0}).onOk((()=>{Z.api.delete("/portfolio/"+o.portfolioId,{headers:{Authorization:`Bearer ${e}`}}).then((({data:o})=>{a.notify({message:"Deleted portfolio",progress:!0,color:"positive",icon:"check_circle",position:"top"}),t.dispatch("portfolio/fetchPortfolios"),n.replace("/app/portfolio/")})).catch((o=>{a.notify({message:`Failed to delete portfolio settings: ${o}`,progress:!0,color:"negative",icon:"error",position:"top"})}))}))}))}function d(e){S.bE.getTokenSilently().then((l=>{Z.api.patch("/portfolio/"+o.portfolioId,e,{headers:{Authorization:`Bearer ${l}`}}).then((({data:o})=>{a.notify({message:`Saved portfolio settings: ${o.name} (${o.id})`,progress:!0,color:"positive",icon:"check_circle",position:"top"}),t.dispatch("portfolio/fetchPortfolios")})).catch((o=>{a.notify({message:`Failed to save portfolio settings: ${o}`,progress:!0,color:"negative",icon:"error",position:"top"})}))}))}return(0,l.bv)((()=>{u()})),(0,l.YP)(r,(()=>{s.value=r.value.name,u()})),{confirm:i,deletePortfolio:f,name:s,notifications:m,onSubmit:p,portfolio:r}}});var V=t(68689),_=t(34842),Q=t(28886),x=t(2165),E=t(7518),H=t.n(E);M.render=w;const T=M;H()(M,"components",{QForm:V.Z,QInput:_.Z,QToggle:Q.Z,QBtn:x.Z});var z=t(2860),F=t(86472);const I=(0,l.aZ)({name:"Portfolio",props:{portfolioId:String},components:{PortfolioHoldings:v.Z,PortfolioReturns:y.Z,PortfolioSettings:T,PortfolioSummary:z.Z,PortfolioTransactions:F.Z},setup(o){const e=(0,b.oR)(),{portfolioId:t}=(0,l.BK)(o),a=(0,l.iH)("summary");e.commit("portfolio/clearCurrentPortfolio"),e.commit("portfolio/clearBenchmark"),e.dispatch("portfolio/fetchPortfolio",o.portfolioId),(0,l.YP)(t,(async(o,t)=>{e.dispatch("portfolio/fetchPortfolio",o)}));const n=(0,l.Fl)((()=>e.state.portfolio.current));return{format:g.Z,portfolio:n,tabModel:a}}});var B=t(24379),C=t(57547),D=t(3269),U=t(31481),$=t(85926),A=t(5906),j=t(86602);I.render=d;const R=I;H()(I,"components",{QPage:B.Z,QTabs:C.Z,QTab:D.Z,QBreadcrumbs:U.Z,QBreadcrumbsEl:$.Z,QTabPanels:A.Z,QTabPanel:j.Z})}}]);